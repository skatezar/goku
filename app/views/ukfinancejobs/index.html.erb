<br>
<h2 class="text-center">
  Find <strong>relevant</strong> finance opportunities
</h2>
<h5 class="text-center heartbeat-text" style="color: green;">
  <%= Ukfinancejob.all.count %> jobs posted

</h5>
<br>
<button class="btn mobile-only w-100 btn-green" data-bs-toggle="collapse" href="#collapseExample1" role="button" aria-expanded="false" aria-controls="collapseExample1">+ What is this?</button>

<div class="d-flex justify-content-center">
  <button class="btn desktop-only  btn-green" data-bs-toggle="collapse" href="#collapseExample1" role="button" aria-expanded="false" aria-controls="collapseExample1">+ What is this?</button>  
</div>


         
<div class="collapse -only" id="collapseExample1">
  <p class="container">
    A focused and all-encompassing overview of EU/UK high finance job roles for juniors (up to associate). Make sure to take advantage of <strong>easter eggs (i.e. spring or insight internships)!</strong>
    By default, jobs are filtered chronologically by application opening date.
  </p>
</div>


<% if current_user and current_user.admin == true %>
<br>
<br>
    <%= link_to 'Add UK Finance Job', new_ukfinancejob_path, class: 'btn btn-primary btn-dark' %>
<% end %>

<div class="filter-container desktop-only">
  <br>
  <form action="<%= ukfinancejobs_path %>" method="get">
    <div class="form-row">
    <div class="col-md-3 p-3">
    <%= select_tag :location, options_for_select([["Select location", ""]].concat(@locations), params[:location]), { class: "form-control" } %>
  </div>
  <div class="col-md-3 p-3">
  <%= select_tag :type_of_job, options_for_select([["Select type of job", ""]].concat(@types_of_job), params[:type_of_job]), { class: "form-control" } %>
  </div>

  <div class="col-md-3 p-3">
    <%= select_tag :company, options_for_select([["Select company", ""]].concat(@companies), params[:company]), { class: "form-control" } %>
  </div>

  <div class="col-md-3 p-3 checkbox-container">
    <%= check_box_tag :application_opening_date_filter, 'true', params[:application_opening_date_filter] == 'true' %>
    <%= label_tag :application_opening_date_filter, ' Open applications only' %>
  </div>

  <!--
  <div class="col-md-3 p-3">
  <%= label_tag :rolling_admission, "Rolling Admission" %>
  <%= select_tag :rolling_admission, options_for_select([["Select rolling admission", ""], ['All', ''], ['Yes', 'true'], ['No', 'false']], params[:rolling_admission]), class: "form-control" %>
  </div>
  -->
    </div>
    <div class="d-flex justify-content-center">
      <%= submit_tag "Filter", class: "btn-dark btn btn-primary",  style: "width: 20%;" %>  
    </div>
    <div class="d-flex mt-3 justify-content-center">
      <%= link_to "Reset filter", ukfinancejobs_path,  class: "btn btn-white" %>      </div>
    
  </form>
</div>

<!-- mobile view -->

<div class="filter-container mobile-only">
  <br>
  <form action="<%= ukfinancejobs_path %>" method="get">
    <div class="form-row">
    <div class="col-md-3 p-3 w-100">
    <%= select_tag :location, options_for_select([["Select location", ""]].concat(@locations), params[:location]), { class: "form-control w-100" } %>
  </div>
  <div class="col-md-3 p-3 w-100">
  <%= select_tag :type_of_job, options_for_select([["Select type of job", ""]].concat(@types_of_job), params[:type_of_job]), { class: "form-control w-100" } %>
  </div>
  <div class="col-md-3 p-3 w-100">
    <%= select_tag :company, options_for_select([["Select company", ""]].concat(@companies), params[:company]), { class: "form-control" } %>
  </div>

  <div class="col-md-3 p-3 checkbox-container">
    <%= check_box_tag :application_opening_date_filter, 'true', params[:application_opening_date_filter] == 'true' %>
    <%= label_tag :application_opening_date_filter, ' Open applications only' %>
  </div>

  <!--
  <div class="col-md-3 p-3">
  <%= label_tag :rolling_admission, "Rolling Admission" %>
  <%= select_tag :rolling_admission, options_for_select([["Select rolling admission", ""], ['All', ''], ['Yes', 'true'], ['No', 'false']], params[:rolling_admission]), class: "form-control" %>
  </div>
  -->
    </div>
    <div class="d-flex justify-content-center">
      <%= submit_tag "Filter", class: "btn-dark w-100 btn btn-primary",  style: "width: 20%;" %>  
    </div>
    <div class="d-flex mt-3 justify-content-center">
      <%= link_to "Reset filter", ukfinancejobs_path,  class: "btn btn-white" %>      </div>
  </form>
</div>

          




<div class="card-container" style="width: 100%; display: flex; flex-wrap: wrap; justify-content: center;">
  <% @ukfinancejobs.each do |ukfinancejob| %>
    <div class="card" style="background-color: white; border: 1px solid black; padding: 5px; width: 155px; height: 250px; margin: 5px; display: flex; flex-direction: column; justify-content: space-between;">
      <div style="flex: 1;">
        <h6 class="text-center bold" style="max-height: 2.5em; height: 2.5em; overflow: hidden;"><%= ukfinancejob.title %></h6>
        <div class="d-flex justify-content-center mt-3">
          <%= cl_image_tag ukfinancejob.photo.key, height: 75, crop: :fill %>
        </div>
      </div>

      <div style="flex: 1;">
        <p class="text-center mt-2" style="max-height: 1.5em; overflow: hidden;"><%= ukfinancejob.location %></p>
        <p class="text-center italic italic_small" style="margin-top: -15px;">Apply by <%= ukfinancejob.deadline_date.day %> <%= t('date.abbr_month_names')[ukfinancejob.deadline_date.month] %> <%= ukfinancejob.deadline_date.year %></p>
      </div>
      
      <%= link_to 'View', ukfinancejob_path(ukfinancejob), class: 'btn btn-green', style: 'width: 100%' %>
    </div>
  <% end %>
</div>

